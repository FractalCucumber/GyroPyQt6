

import numpy as np
CRC8_END_VALUE = 0x17
CRC8_INIT_VALUE = 0xfa
CRC8_Table = np.array([
	0x273a1d00,0x534e6974,0xcfd2f5e8,0xbba6819c,0xeaf7d0cd,0x9e83a4b9,0x021f3825,0x766b4c51,
	0xa0bd9a87,0xd4c9eef3,0x4855726f,0x3c21061b,0x6d70574a,0x1904233e,0x8598bfa2,0xf1eccbd6,
	0x34290e13,0x405d7a67,0xdcc1e6fb,0xa8b5928f,0xf9e4c3de,0x8d90b7aa,0x110c2b36,0x65785f42,
	0xb3ae8994,0xc7dafde0,0x5b46617c,0x2f321508,0x7e634459,0x0a17302d,0x968bacb1,0xe2ffd8c5,
	0x011c3b26,0x75684f52,0xe9f4d3ce,0x9d80a7ba,0xccd1f6eb,0xb8a5829f,0x24391e03,0x504d6a77,
	0x869bbca1,0xf2efc8d5,0x6e735449,0x1a07203d,0x4b56716c,0x3f220518,0xa3be9984,0xd7caedf0,
	0x120f2835,0x667b5c41,0xfae7c0dd,0x8e93b4a9,0xdfc2e5f8,0xabb6918c,0x372a0d10,0x435e7964,
	0x9588afb2,0xe1fcdbc6,0x7d60475a,0x0914332e,0x5845627f,0x2c31160b,0xb0ad8a97,0xc4d9fee3])

def CRC8_CountBYTE(uiData, iSize):
	iRez=np.full((iSize), CRC8_INIT_VALUE)
	# unsigned int i
	# unsigned int iIndex
	# for(i=0;i <iSize; i++):
	for i in range(iSize)
		iIndex = (iRez ^ uiData[:, i]) & 0xff
		iRez = CRC8_Table[iIndex >> 2] >> (8 * (iIndex % 4))
	return (iRez ^ CRC8_END_VALUE) & 0xff